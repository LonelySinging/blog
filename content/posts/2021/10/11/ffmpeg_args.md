---
title: "ffmpeg 使用记录"
date: 2021-10-11T08:41:32+08:00
draft: true
---

这周周末尝试把我硬盘上面的视频文件压缩了一下，但是效果并不理想。其中主要有两个原因，

+ 视频本来就是`h264`的编码，再重新编码也没啥用，因为限制大小的主要是码率
+ `ffmpeg GPU`加速版的`h265`编码器有些问题

导致有些文件使用`hevc_nvenc`编码器会编码失败，最终不能播放。所以最终还是重新压制了`h264`，但是这么干最终只是把码率降了下来。最终使用命令如下

`ffmpeg -i 1.mp4 -c:v xlib264_nvenc -y 2.mp4`

经过各种查询资料之后发现默认的参数就差不多是最适合我的了，如果要指定码率，那就需要考虑每个原文件的码率都不一样，这样的话压缩之后的目标码率也不一样。而`ffmpeg`的默认参数把码率都放到了`2300`左右，能看到有损失画质，但是大概可以接受吧 (手机播放的话)

